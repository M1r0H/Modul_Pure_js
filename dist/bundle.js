(()=>{"use strict";const e=document.getElementById("genre"),t=document.getElementById("lang"),n=document.getElementById("filter"),a=e=>{const t=e.target.closest("#input");n.style.display=t?"flex":"none",document.body.onclick=function(e){"input"!==e.target.id&&"genre"!==e.target.id&&"lang"!==e.target.id&&(n.style.display="none")}},i=document.getElementById("input"),l=document.getElementById("quantity");let d=1;const o=document.getElementById("currentPage"),s=document.getElementsByClassName("dot")[0],r=document.getElementsByClassName("dropdown_menu")[0],c=e=>{const t=e.target.closest(".page_number"),n=e.target.closest("#dropdown_page");"arrow_right"===e.target.id&&d<5&&(d=++d,o.innerText=`Ð¡Ñ‚Ñ€Ð°Ð½Ð¸Ñ†Ð° ${d}`),"arrow_left"===e.target.id&&d>1&&(d=--d,o.innerText=`Ð¡Ñ‚Ñ€Ð°Ð½Ð¸Ñ†Ð° ${d}`),t&&(d=e.target.innerText,o.innerText=`Ð¡Ñ‚Ñ€Ð°Ð½Ð¸Ñ†Ð° ${d}`),n&&(s.classList.toggle("dot_click"),r.classList.toggle("drop")),f()},m=document.getElementById("pagination"),g=document.getElementById("currentPage"),u=(e,t,n)=>{const a=document.createElement(e);return a.setAttribute(t,n),a},p=document.getElementById("not_found"),y=document.getElementById("cards"),h="https://cdn2.iconfinder.com/data/icons/mobile-smart-phone/64/broken_phone_fix_problem_error_danger-512.png",f=()=>{(i.value?(g.style.display="none",m.style.display="none",fetch(`http://api.tvmaze.com/search/shows?q=${i.value}`)):(g.style.display="block",m.style.display="flex",fetch(`http://api.tvmaze.com/shows?page=${d}`))).then((e=>e.json())).then((n=>(0===n.length?p.style.display="block":p.style.display="none",i.value?(n=>{if("All"!==e.value){const a=n.filter((t=>t.show.genres.includes(e.value)));return"All"!==t.value?a.filter((e=>e.show.language.includes(t.value))):a}return n.filter((e=>e.show.language.toLowerCase().includes(t.value))),n})(n):n))).then((e=>"5"===l.value?e.slice(0,5):e.slice(0,10))).then((e=>{if(i.value){let t=[];for(const n of e)t.push(n.show);return t}return e})).then((e=>{y.innerHTML="",e.forEach((e=>{const t=u("div","id","divFilms"),n=u("div","id","back_for_card"),a=u("img","id","card"),i=u("a","class","like"),l=u("div","id","descr"),d=u("img","class","imgLike");d.setAttribute("src","../assets/img/1.png"),localStorage.getItem(e.name)&&(t.style.backgroundColor="rgba(24, 24, 24, 0.2)",d.style.transform="rotateX(180deg)"),e.image?a.setAttribute("src",e.image.medium):a.setAttribute("src","https://cdn2.iconfinder.com/data/icons/mobile-smart-phone/64/broken_phone_fix_problem_error_danger-512.png"),e.summary.length>150?l.innerHTML=`${e.name} ${e.summary.slice(0,150)}...`:l.innerHTML=`${e.name} ${e.summary}`,y.appendChild(t),t.appendChild(n),n.appendChild(a),n.appendChild(i),i.appendChild(d),t.appendChild(l),d.addEventListener("click",(n=>{if(localStorage.getItem(e.name))a.style.transform="scale(.95)",setTimeout((function(){a.style.transform="scale(1)"}),250),d.style.transform="rotate(0)",localStorage.removeItem(e.name),t.style.backgroundColor="";else{a.style.transform="scale(.95)",setTimeout((function(){a.style.transform="scale(1)"}),250);const n={name:e.name,img:e.image&&e.image.medium?e.image.medium:h,description:e.summary,genres:e.genres,rating:e.rating.average?e.rating.average:0};e.image||(n.img=h),localStorage.setItem(e.name,JSON.stringify(n)),t.style.backgroundColor="rgba(24, 24, 24, 0.2)",d.style.transform="rotateX(180deg)"}}))}))}))},E=document.getElementById("container"),v=document.getElementById("myModal"),I=document.getElementById("close"),k=document.getElementById("modalImg"),L=document.getElementById("filmName"),b=document.getElementById("filmGenre"),B=document.getElementById("filmRating"),_=document.getElementById("description"),w=document.getElementById("btn"),C=document.getElementById("pagination"),T=document.getElementById("search"),$=document.getElementById("scroll_top");if(document.location.pathname.includes("Films")){f();const e=()=>{window.pageYOffset>"700"?$.style.display="block":$.style.display="none"};window.addEventListener("onscroll",e),T.addEventListener("click",a),l.addEventListener("change",f),C.addEventListener("click",c),w.addEventListener("click",f),i.addEventListener("keydown",(function(e){13===e.keyCode&&f()}))}document.location.pathname.includes("Favourite")&&(()=>{let e=[];for(let t=0;t<localStorage.length;t++){const n=localStorage.key(t),a=localStorage.getItem(n),i=JSON.parse(a);e.push(i)}e.forEach((e=>{const t=u("div","id","divFilms"),n=u("img","id","card"),a=u("a","id","like"),i=u("img","id","imgLike");i.setAttribute("src","../assets/img/1.png"),n.setAttribute("src",e.img),E.appendChild(t),t.appendChild(a),a.appendChild(i),t.appendChild(n),window.addEventListener("click",(e=>{e.target===v&&(v.style.display="none")})),n.addEventListener("click",(()=>{k.innerHTML="",L.innerHTML="",b.innerHTML="",B.innerHTML="",_.innerHTML="",i.style.zIndex="1",v.style.display="block";const t=n.cloneNode(n);k.appendChild(t),L.append(e.name),b.append(e.genres),B.append(`${e.rating}ðŸ¤©`),e.description.length>250?_.innerHTML=`${e.description.slice(0,250)}...`:_.innerHTML=`${e.description.slice(0,250)}`,_.addEventListener("click",(()=>{_.innerHTML=e.description}))})),I.addEventListener("click",(()=>{v.style.display="none"})),i.addEventListener("click",(()=>{localStorage.removeItem(`${e.name}`),location.reload()}))}))})()})();